{% extends 'events/base.html' %}
{% block content %}
  <div class="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 py-6 px-3 sm:px-6 lg:px-8">
    <div class="max-w-2xl mx-auto">
      <!-- Card Container -->
      <div class="bg-white rounded-xl shadow-2xl overflow-hidden">
        <!-- Header -->
        <div class="bg-gradient-to-r from-indigo-600 to-purple-600 px-4 py-6 sm:px-8 sm:py-8 text-white">
          <h1 class="text-2xl sm:text-3xl font-black mb-1 sm:mb-2">Join Book-My-Event</h1>
          <p class="text-xs sm:text-base text-indigo-100">Create account & discover amazing events</p>
        </div>

        <!-- Form -->
        <div class="px-4 py-6 sm:px-8 sm:py-8">
          <form method="post" id="signupForm" class="space-y-5">
            {% csrf_token %}

            <!-- Error Messages -->
            {% if user_form.non_field_errors or profile_form.non_field_errors %}
              <div class="bg-red-50 border-l-4 border-red-500 p-3 rounded">
                {% for error in user_form.non_field_errors %}
                  <p class="text-xs sm:text-sm text-red-700">{{ error }}</p>
                {% endfor %}
                {% for error in profile_form.non_field_errors %}
                  <p class="text-xs sm:text-sm text-red-700">{{ error }}</p>
                {% endfor %}
              </div>
            {% endif %}

            <!-- Section 1: Login -->
            <div class="pb-4 border-b border-gray-200">
              <h2 class="text-base sm:text-lg font-bold text-gray-900 mb-4">üîê Login</h2>

              <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                <!-- Username -->
                <div>
                  <label class="block text-xs sm:text-sm font-semibold text-gray-900 mb-1">Username <span class="text-red-500">*</span></label>
                  {{ user_form.username }}
                  {% if user_form.username.errors %}<p class="text-xs text-red-600 mt-1">{{ user_form.username.errors.0 }}</p>{% endif %}
                </div>

                <!-- Email -->
                <div>
                  <label class="block text-xs sm:text-sm font-semibold text-gray-900 mb-1">Email <span class="text-red-500">*</span></label>
                  {{ user_form.email }}
                  {% if user_form.email.errors %}<p class="text-xs text-red-600 mt-1">{{ user_form.email.errors.0 }}</p>{% endif %}
                </div>

                <!-- Password -->
                <div>
                  <label class="block text-xs sm:text-sm font-semibold text-gray-900 mb-1">Password <span class="text-red-500">*</span></label>
                  {{ user_form.password }}
                  {% if user_form.password.errors %}<p class="text-xs text-red-600 mt-1">{{ user_form.password.errors.0 }}</p>{% endif %}
                </div>

                <!-- Confirm -->
                <div>
                  <label class="block text-xs sm:text-sm font-semibold text-gray-900 mb-1">Confirm <span class="text-red-500">*</span></label>
                  {{ user_form.confirm_password }}
                  {% if user_form.confirm_password.errors %}<p class="text-xs text-red-600 mt-1">{{ user_form.confirm_password.errors.0 }}</p>{% endif %}
                </div>
              </div>
            </div>

            <!-- Section 2: Profile -->
            <div class="pb-4 border-b border-gray-200">
              <h2 class="text-base sm:text-lg font-bold text-gray-900 mb-4">üë§ Profile</h2>

              <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                <!-- Full Name -->
                <div>
                  <label class="block text-xs sm:text-sm font-semibold text-gray-900 mb-1">Full Name <span class="text-red-500">*</span></label>
                  {{ profile_form.full_name }}
                  {% if profile_form.full_name.errors %}<p class="text-xs text-red-600 mt-1">{{ profile_form.full_name.errors.0 }}</p>{% endif %}
                </div>

                <!-- Phone -->
                <div>
                  <label class="block text-xs sm:text-sm font-semibold text-gray-900 mb-1">Phone</label>
                  {{ profile_form.phone }}
                </div>

                <!-- City -->
                <div>
                  <label class="block text-xs sm:text-sm font-semibold text-gray-900 mb-1">City <span class="text-red-500">*</span></label>
                  {{ profile_form.city }}
                  {% if profile_form.city.errors %}<p class="text-xs text-red-600 mt-1">{{ profile_form.city.errors.0 }}</p>{% endif %}
                </div>

                <!-- Picture -->
                <div>
                  <label class="block text-xs sm:text-sm font-semibold text-gray-900 mb-1">Picture URL</label>
                  {{ profile_form.profile_picture }}
                </div>
              </div>
            </div>

            <!-- Section 3: Role & Interests -->
            <div class="pb-4 border-b border-gray-200">
              <h2 class="text-base sm:text-lg font-bold text-gray-900 mb-4">üéØ Role & Interests</h2>

              <!-- Role -->
              <div class="mb-4">
                <label class="block text-xs sm:text-sm font-semibold text-gray-900 mb-2">Your Role <span class="text-red-500">*</span></label>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-2">
                  {% for val, label in profile_form.role.field.choices %}
                    <label class="flex items-center p-2 sm:p-3 border-2 border-gray-300 rounded-lg cursor-pointer hover:border-indigo-500 hover:bg-indigo-50 transition">
                      <input type="radio" name="role" value="{{ val }}" class="w-4 h-4" {% if profile_form.role.value == val %}checked{% endif %}>
                      <span class="ml-2 font-semibold text-gray-900 text-xs sm:text-sm">
                        {% if val == 'attendee' %}üé´ Attendee{% else %}üé™ Organiser{% endif %}
                      </span>
                    </label>
                  {% endfor %}
                </div>
              </div>

              <!-- Interests -->
              <div>
                <label class="block text-xs sm:text-sm font-semibold text-gray-900 mb-2">Interests</label>
                <div class="grid grid-cols-2 gap-2">
                  {% for val, label in profile_form.interests.field.choices %}
                    <label class="flex items-center p-2 border border-gray-300 rounded cursor-pointer hover:bg-indigo-50 transition">
                      <input type="checkbox" name="interests" value="{{ val }}" class="w-4 h-4" {% if val in profile_form.interests.value %}checked{% endif %}>
                      <span class="ml-2 text-xs sm:text-sm text-gray-700">{{ label }}</span>
                    </label>
                  {% endfor %}
                </div>
              </div>
            </div>

            <!-- Terms -->
            <label class="flex items-start gap-2 text-xs sm:text-sm">
              <input type="checkbox" class="w-4 h-4 mt-0.5" required>
              <span class="text-gray-700">I agree to <a href="#" class="text-indigo-600 font-semibold">Terms</a> and <a href="#" class="text-indigo-600 font-semibold">Privacy</a></span>
            </label>

            <!-- Submit -->
            <button type="submit" class="w-full py-2.5 sm:py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-sm sm:text-base font-bold rounded-lg hover:from-indigo-700 hover:to-purple-700 transition mt-4 shadow-lg">
              ‚ú® Create Account
            </button>

            <!-- Login Link -->
            <div class="text-center text-xs sm:text-sm text-gray-600">
              Already have account? <a href="/login/" class="text-indigo-600 font-semibold hover:underline">Sign In</a>
            </div>
          </form>
        </div>
      </div>

      <p class="text-center text-xs text-gray-400 mt-4">üîí Secure & encrypted</p>
    </div>
  </div>

  <style>
    input[type="text"], input[type="email"], input[type="password"], input[type="tel"], input[type="url"] {
      width: 100%;
      padding: 0.5rem 0.75rem;
      border: 1px solid #d1d5db;
      border-radius: 0.375rem;
      font-size: 0.875rem;
    }

    input[type="text"]:focus, input[type="email"]:focus, input[type="password"]:focus, input[type="tel"]:focus, input[type="url"]:focus {
      outline: none;
      border-color: #4f46e5;
      box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
    }

    @media (max-width: 640px) {
      input[type="text"], input[type="email"], input[type="password"], input[type="tel"], input[type="url"] {
        font-size: 16px;
      }
    }
  </style>
{% endblock %}
